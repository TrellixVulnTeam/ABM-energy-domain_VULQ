{
  "version":"1.0",
  "data":{
    "sheets":[
      {
        "name":"Sheet",
        "blocks":[
          {
            "type":"MD",
            "text":"# Izdelava agentnega modela aktivnega odjemalca\n\nNajprej samo en odjemalec ki je dovzeten na zunanje vplive aka community cordinator.\n\n- Agent\n    - 24 urni urnik porabe\n        - Flexibile ali,\n        - FIxed\n    - Njegova utež, znak obnašanja -> Sprememba v fleksibilnost. (Ali je agent pripravljen premikati porabo)\n    - Susceptibility oz. dovzetnost na spremembe [Jensen 2015] ali influencability [Douw 2016]\n\n![](https:\/\/paper-attachments.dropbox.com\/s_9E1224E4993919A665319145380AED8FB8A0E410E7EAEB27191C31F34972CCD9_1618215920264_image.png)\n\n\n",
            "outputs":[
              
            ],
            "language":"MARKDOWN",
            "inputCollapsed":false,
            "outputCollapsed":false
          },
          {
            "type":"CODE",
            "text":"import pandas as pd\nimport random\nimport matplotlib.pyplot as plt\nplt.style.use('seaborn-whitegrid')",
            "outputs":[
              {
                "stdout":"",
                "stderr":"",
                "outputReprs":[
                  
                ],
                "displayData":[
                  
                ]
              }
            ],
            "language":"PYTHON",
            "inputCollapsed":false,
            "outputCollapsed":false
          },
          {
            "type":"MD",
            "text":"# Uvoz podatkov",
            "outputs":[
              
            ],
            "language":"MARKDOWN",
            "inputCollapsed":false,
            "outputCollapsed":false
          },
          {
            "type":"CODE",
            "text":"#load schedhule and load data\ndata = pd.read_excel(r'notebookData_flexiblestatic_load.xlsx')\ndata = data.set_index('time')\n#store data in schedule dictionary key=hour, pair=type of load\nschedule = {}\nfor index, row in data.iterrows():\n    schedule[index] = row['load']\nprint(schedule)",
            "outputs":[
              {
                "stdout":"{1: 'static', 2: 'static', 3: 'static', 4: 'static', 5: 'static', 6: 'static', 7: 'static', 8: 'static', 9: 'static', 10: 'static', 11: 'static', 12: 'static', 13: 'flexible', 14: 'flexible', 15: 'flexible', 16: 'flexible', 17: 'flexible', 18: 'flexible', 19: 'flexible', 20: 'flexible', 21: 'flexible', 22: 'flexible', 23: 'flexible', 24: 'flexible'}\n",
                "stderr":"",
                "outputReprs":[
                  
                ],
                "displayData":[
                  
                ]
              }
            ],
            "language":"PYTHON",
            "inputCollapsed":false,
            "outputCollapsed":false
          },
          {
            "type":"MD",
            "text":"# Ustvari agente\n\nFunkcija za kreiranje agentov, ki vrne slovar agentov kjer je njihov id ključ, vrednosti pa predstavljajo urnik porabe in neka utež.\n\n#todos:\n- izdelava omrežja in povezav med agenti\n- dodajanje primernih in različnih uteži\n- dodajanje vrste consumerja\n- dodajanje moči povezave med agenti",
            "outputs":[
              
            ],
            "language":"MARKDOWN",
            "inputCollapsed":false,
            "outputCollapsed":false
          },
          {
            "type":"CODE",
            "text":"def create_agents(number_of_agents, schedule_data, flexibility, susceptibility):\n    agent_list = {}\n    while number_of_agents > 0: \n        agent = [schedule_data, flexibility, susceptibility]\n        agent_list[number_of_agents] = agent\n        number_of_agents -= 1\n    return agent_list \n\n#ustvari slovar agentov z nastavljenimi vrednostmi\nall_agents = create_agents(1,schedule,0.5,0.1)\nall_agents",
            "outputs":[
              {
                "stdout":"",
                "stderr":"",
                "outputReprs":[
                  
                ],
                "displayData":[
                  {
                    "text":"{1: [{1: 'static',\n   2: 'static',\n   3: 'static',\n   4: 'static',\n   5: 'static',\n   6: 'static',\n   7: 'static',\n   8: 'static',\n   9: 'static',\n   10: 'static',\n   11: 'static',\n   12: 'static',\n   13: 'flexible',\n   14: 'flexible',\n   15: 'flexible',\n   16: 'flexible',\n   17: 'flexible',\n   18: 'flexible',\n   19: 'flexible',\n   20: 'flexible',\n   21: 'flexible',\n   22: 'flexible',\n   23: 'flexible',\n   24: 'flexible'},\n  0.5,\n  0.1]}",
                    "type":"text"
                  }
                ]
              }
            ],
            "language":"PYTHON",
            "inputCollapsed":false,
            "outputCollapsed":false
          },
          {
            "type":"MD",
            "text":"# Sprememba obnašanja\n\nFunkcija za spremembo obnašanja agenta. Zaenkrat pregleda vse agente, kasneje je smiselno omejiti samo na enega za večjo fleksibilnst. \n\nGlavna sprememba se dogaja s parametrom fleksibilnosti, ki se izračuna po enačbi za feedback efekt [Jensen 2015], ki dobro pnazori zunanji vpliv na agenta. \n\n![](https:\/\/paper-attachments.dropbox.com\/s_E6DE9BF2AA34A0A31A1F56F8C2F61B575F68978C991E079469C626C1C89ECF00_1594672402397_image.png)\n\n*Po enačbi se feedback efekt izračuna tako, da se gleda trenuten behaviour (βt) in se ga primerja z prejšnim obnašanjem (βt-1), ki pa se mu prišteje razlika med INCENTIVIZED behaviour in prejšnjim obnašanjem (βt-1), vse skupaj pa se spreminja z stopnjo susceptibilitya za feedback effect (Δβ)\nIncentivizied behaviour: Je obnašanje, ki ga spodbujamo, uporabnika skušamo motivirati proti tem obnašanju*",
            "outputs":[
              
            ],
            "language":"MARKDOWN",
            "inputCollapsed":false,
            "outputCollapsed":false
          },
          {
            "type":"CODE",
            "text":"def behaviour(agent_list, hour):\n    #preko vseh agentov\n    for agent in agent_list:\n        #nastavi fleksibilnost\n        flexibility = agent_list[agent][1]\n        #nastavi load \n        load = agent_list[agent][0][hour]\n        #goal flexibility -> Koliko želimo da agent postane flksibilen\n        goal_flexibility = 0.6\n        print('Fleksibilnost na zacetku: ', flexibility)\n        if load == 'static':\n            # če je load static naredi nekaj z utežjo\n            # priredba enačbe za izračun feedback efekta po Jensen, tako da posnamemo vpliv od zunaj\n            flexibility = flexibility + (goal_flexibility - flexibility)* agent_list[agent][2]\n            # update agent flexibility\n            agent_list[agent][1] = flexibility\n            if flexibility >= 0.6:\n               load = 'flexible'\n               agent_list[agent][0][hour] = load\n            print('Fleksibilnost na koncu: ', flexibility)\n            print('Trenutni load', load)\n    return agent_list\n\nbehaviour(all_agents,1)\nall_agents",
            "outputs":[
              {
                "stdout":"Fleksibilnost na zacetku:  0.5\nFleksibilnost na koncu:  0.51\nTrenutni load static\n",
                "stderr":"",
                "outputReprs":[
                  
                ],
                "displayData":[
                  {
                    "text":"{1: [{1: 'static',\n   2: 'static',\n   3: 'static',\n   4: 'static',\n   5: 'static',\n   6: 'static',\n   7: 'static',\n   8: 'static',\n   9: 'static',\n   10: 'static',\n   11: 'static',\n   12: 'static',\n   13: 'flexible',\n   14: 'flexible',\n   15: 'flexible',\n   16: 'flexible',\n   17: 'flexible',\n   18: 'flexible',\n   19: 'flexible',\n   20: 'flexible',\n   21: 'flexible',\n   22: 'flexible',\n   23: 'flexible',\n   24: 'flexible'},\n  0.51,\n  0.1]}",
                    "type":"text"
                  }
                ]
              }
            ],
            "language":"PYTHON",
            "inputCollapsed":false,
            "outputCollapsed":false
          },
          {
            "type":"MD",
            "text":"# Simulacija\n\nSimulacija naj bi se izvajala več dni, da bomo kasneje posnemali vplive med agenti skozi vsakodnevne interakcije. Zato je ključno, da se uredi števec, ki se sprehaja skozi ure dneva za primerjavo z urnikom porabe agentov. ",
            "outputs":[
              
            ],
            "language":"MARKDOWN",
            "inputCollapsed":false,
            "outputCollapsed":false
          },
          {
            "type":"CODE",
            "text":"def simulation(days, agent_list):\n    # rabimo nek števec za ure ki predstavlja 1 dan\n    hours = days * 24\n    t = 0\n    time = 1\n    while days > 0:\n        while t < hours:     \n            print('day hour:', time)\n            behaviour(agent_list, time)\n            time +=1\n            t +=1 ",
            "outputs":[
              {
                "stdout":"",
                "stderr":"",
                "outputReprs":[
                  
                ],
                "displayData":[
                  
                ]
              }
            ],
            "language":"PYTHON",
            "inputCollapsed":false,
            "outputCollapsed":false
          },
          {
            "type":"CODE",
            "text":"simulation(24, all_agents)",
            "outputs":[
              {
                "stdout":"day hour: 1\nFleksibilnost na zacetku:  0.51\nFleksibilnost na koncu:  0.519\nTrenutni load static\nday hour: 2\nFleksibilnost na zacetku:  0.519\nFleksibilnost na koncu:  0.5271\nTrenutni load static\nday hour: 3\nFleksibilnost na zacetku:  0.5271\nFleksibilnost na koncu:  0.53439\nTrenutni load static\nday hour: 4\nFleksibilnost na zacetku:  0.53439\nFleksibilnost na koncu:  0.5409510000000001\nTrenutni load static\nday hour: 5\nFleksibilnost na zacetku:  0.5409510000000001\nFleksibilnost na koncu:  0.5468559000000001\nTrenutni load static\nday hour: 6\nFleksibilnost na zacetku:  0.5468559000000001\nFleksibilnost na koncu:  0.55217031\nTrenutni load static\nday hour: 7\nFleksibilnost na zacetku:  0.55217031\nFleksibilnost na koncu:  0.556953279\nTrenutni load static\nday hour: 8\nFleksibilnost na zacetku:  0.556953279\nFleksibilnost na koncu:  0.5612579511\nTrenutni load static\nday hour: 9\nFleksibilnost na zacetku:  0.5612579511\nFleksibilnost na koncu:  0.56513215599\nTrenutni load static\nday hour: 10\nFleksibilnost na zacetku:  0.56513215599\nFleksibilnost na koncu:  0.568618940391\nTrenutni load static\nday hour: 11\nFleksibilnost na zacetku:  0.568618940391\nFleksibilnost na koncu:  0.5717570463519001\nTrenutni load static\nday hour: 12\nFleksibilnost na zacetku:  0.5717570463519001\nFleksibilnost na koncu:  0.57458134171671\nTrenutni load static\nday hour: 13\nFleksibilnost na zacetku:  0.57458134171671\nday hour: 14\nFleksibilnost na zacetku:  0.57458134171671\nday hour: 15\nFleksibilnost na zacetku:  0.57458134171671\nday hour: 16\nFleksibilnost na zacetku:  0.57458134171671\nday hour: 17\nFleksibilnost na zacetku:  0.57458134171671\nday hour: 18\nFleksibilnost na zacetku:  0.57458134171671\nday hour: 19\nFleksibilnost na zacetku:  0.57458134171671\nday hour: 20\nFleksibilnost na zacetku:  0.57458134171671\nday hour: 21\nFleksibilnost na zacetku:  0.57458134171671\nday hour: 22\nFleksibilnost na zacetku:  0.57458134171671\nday hour: 23\nFleksibilnost na zacetku:  0.57458134171671\nday hour: 24\nFleksibilnost na zacetku:  0.57458134171671\nday hour: 25\n",
                "stderr":"",
                "outputReprs":[
                  
                ],
                "displayData":[
                  
                ],
                "error":{
                  "category":"KeyError",
                  "message":"KeyError: 25",
                  "frames":[
                    {
                      "name":"<module>",
                      "line":1
                    },
                    {
                      "name":"simulation",
                      "line":9
                    },
                    {
                      "name":"behaviour",
                      "line":7
                    }
                  ]
                }
              }
            ],
            "language":"PYTHON",
            "inputCollapsed":false,
            "outputCollapsed":false
          },
          {
            "type":"CODE",
            "text":"#test\ndnevi = 4\nwhile dnevi > 0: \n    ure = 24\n    while ure > 0:\n        ure += 1\n        print(\"Ura: \", ure)\n        print(\"Dan: \", dnevi)\n    dnevi += 1\n",
            "outputs":[
              {
                "stdout":"Ura:  23\nDan:  4\nUra:  22\nDan:  4\nUra:  21\nDan:  4\nUra:  20\nDan:  4\nUra:  19\nDan:  4\nUra:  18\nDan:  4\nUra:  17\nDan:  4\nUra:  16\nDan:  4\nUra:  15\nDan:  4\nUra:  14\nDan:  4\nUra:  13\nDan:  4\nUra:  12\nDan:  4\nUra:  11\nDan:  4\nUra:  10\nDan:  4\nUra:  9\nDan:  4\nUra:  8\nDan:  4\nUra:  7\nDan:  4\nUra:  6\nDan:  4\nUra:  5\nDan:  4\nUra:  4\nDan:  4\nUra:  3\nDan:  4\nUra:  2\nDan:  4\nUra:  1\nDan:  4\nUra:  0\nDan:  4\nUra:  23\nDan:  3\nUra:  22\nDan:  3\nUra:  21\nDan:  3\nUra:  20\nDan:  3\nUra:  19\nDan:  3\nUra:  18\nDan:  3\nUra:  17\nDan:  3\nUra:  16\nDan:  3\nUra:  15\nDan:  3\nUra:  14\nDan:  3\nUra:  13\nDan:  3\nUra:  12\nDan:  3\nUra:  11\nDan:  3\nUra:  10\nDan:  3\nUra:  9\nDan:  3\nUra:  8\nDan:  3\nUra:  7\nDan:  3\nUra:  6\nDan:  3\nUra:  5\nDan:  3\nUra:  4\nDan:  3\nUra:  3\nDan:  3\nUra:  2\nDan:  3\nUra:  1\nDan:  3\nUra:  0\nDan:  3\nUra:  23\nDan:  2\nUra:  22\nDan:  2\nUra:  21\nDan:  2\nUra:  20\nDan:  2\nUra:  19\nDan:  2\nUra:  18\nDan:  2\nUra:  17\nDan:  2\nUra:  16\nDan:  2\nUra:  15\nDan:  2\nUra:  14\nDan:  2\nUra:  13\nDan:  2\nUra:  12\nDan:  2\nUra:  11\nDan:  2\nUra:  10\nDan:  2\nUra:  9\nDan:  2\nUra:  8\nDan:  2\nUra:  7\nDan:  2\nUra:  6\nDan:  2\nUra:  5\nDan:  2\nUra:  4\nDan:  2\nUra:  3\nDan:  2\nUra:  2\nDan:  2\nUra:  1\nDan:  2\nUra:  0\nDan:  2\nUra:  23\nDan:  1\nUra:  22\nDan:  1\nUra:  21\nDan:  1\nUra:  20\nDan:  1\nUra:  19\nDan:  1\nUra:  18\nDan:  1\nUra:  17\nDan:  1\nUra:  16\nDan:  1\nUra:  15\nDan:  1\nUra:  14\nDan:  1\nUra:  13\nDan:  1\nUra:  12\nDan:  1\nUra:  11\nDan:  1\nUra:  10\nDan:  1\nUra:  9\nDan:  1\nUra:  8\nDan:  1\nUra:  7\nDan:  1\nUra:  6\nDan:  1\nUra:  5\nDan:  1\nUra:  4\nDan:  1\nUra:  3\nDan:  1\nUra:  2\nDan:  1\nUra:  1\nDan:  1\nUra:  0\nDan:  1\n",
                "stderr":"",
                "outputReprs":[
                  
                ],
                "displayData":[
                  
                ]
              }
            ],
            "language":"PYTHON",
            "inputCollapsed":false,
            "outputCollapsed":false
          },
          {
            "type":"CODE",
            "text":"",
            "outputs":[
              {
                "stdout":"",
                "stderr":"",
                "outputReprs":[
                  
                ],
                "displayData":[
                  
                ]
              }
            ],
            "language":"PYTHON",
            "inputCollapsed":false,
            "outputCollapsed":false
          }
        ]
      }
    ],
    "kernelType":"DATALORE",
    "language":"PYTHON"
  }
}